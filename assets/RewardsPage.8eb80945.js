import{a as me,Q as he}from"./QToolbar.18be66c1.js";import{u as be,c as we,d as ve,a as Y,Q as R,b as $}from"./QItem.ea354670.js";import{h as G,aA as Z,r as P,g as w,i as M,p as Se,k as f,f as K,l as p,Q as E,t as ee,aB as Ce,u as _e,j as ne,T as ye,aC as ke,aa as te,$ as ae,aD as xe,A as Ae,al as Ie,_ as Te,o as m,I as A,w as c,d as S,J as x,c as H,M as V,F as U,K as C,a as Be,e as N}from"./index.093bcec8.js";import{Q as Re}from"./QBtnGroup.3859936e.js";import{a as qe,Q as q}from"./QMenu.308dbf8e.js";import{u as De}from"./focusout.7793a9df.js";import{u as F}from"./focus-manager.8e1b27e8.js";import{Q as j}from"./selection.eefade81.js";import{Q as X}from"./QSeparator.c85c9878.js";import{u as Le,a as Qe}from"./use-dark.8d7a4edf.js";import{Q as Ne}from"./QPage.43b01384.js";import{C as Me}from"./ClosePopup.a8eb54ee.js";import"./use-tick.e2711675.js";import"./use-timeout.07372709.js";const Oe=Object.keys(Z),He=e=>Oe.reduce((a,n)=>{const d=e[n];return d!==void 0&&(a[n]=d),a},{});var Pe=G({name:"QBtnDropdown",props:{...Z,...De,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:a,emit:n}){const{proxy:d}=ee(),o=P(e.modelValue),s=P(null),t=F(),u=w(()=>{const l={"aria-expanded":o.value===!0?"true":"false","aria-haspopup":"true","aria-controls":t,"aria-label":e.toggleAriaLabel||d.$q.lang.label[o.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(l["aria-disabled"]="true"),l}),g=w(()=>"q-btn-dropdown__arrow"+(o.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),I=w(()=>Ce(e)),_=w(()=>He(e));M(()=>e.modelValue,l=>{s.value!==null&&s.value[l?"show":"hide"]()}),M(()=>e.split,Q);function h(l){o.value=!0,n("beforeShow",l)}function y(l){n("show",l),n("update:modelValue",!0)}function D(l){o.value=!1,n("beforeHide",l)}function L(l){n("hide",l),n("update:modelValue",!1)}function r(l){n("click",l)}function b(l){_e(l),Q(),n("click",l)}function k(l){s.value!==null&&s.value.toggle(l)}function v(l){s.value!==null&&s.value.show(l)}function Q(l){s.value!==null&&s.value.hide(l)}return Object.assign(d,{show:v,hide:Q,toggle:k}),Se(()=>{e.modelValue===!0&&v()}),()=>{const l=[f(K,{class:g.value,name:e.dropdownIcon||d.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&l.push(f(qe,{ref:s,id:t,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:h,onShow:y,onBeforeHide:D,onHide:L},a.default)),e.split===!1?f(E,{class:"q-btn-dropdown q-btn-dropdown--simple",..._.value,...u.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:r},{default:()=>p(a.label,[]).concat(l),loading:a.loading}):f(Re,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...I.value,glossy:e.glossy,stretch:e.stretch},()=>[f(E,{class:"q-btn-dropdown--current",..._.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:b},{default:a.label,loading:a.loading}),f(E,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...u.value,...I.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>l)])}}}),je=G({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:a,emit:n}){let d=!1,o,s,t=null,u=null,g,I;function _(){o&&o(),o=null,d=!1,t!==null&&(clearTimeout(t),t=null),u!==null&&(clearTimeout(u),u=null),s!==void 0&&s.removeEventListener("transitionend",g),g=null}function h(r,b,k){b!==void 0&&(r.style.height=`${b}px`),r.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,d=!0,o=k}function y(r,b){r.style.overflowY=null,r.style.height=null,r.style.transition=null,_(),b!==I&&n(b)}function D(r,b){let k=0;s=r,d===!0?(_(),k=r.offsetHeight===r.scrollHeight?0:void 0):(I="hide",r.style.overflowY="hidden"),h(r,k,b),t=setTimeout(()=>{t=null,r.style.height=`${r.scrollHeight}px`,g=v=>{u=null,(Object(v)!==v||v.target===r)&&y(r,"show")},r.addEventListener("transitionend",g),u=setTimeout(g,e.duration*1.1)},100)}function L(r,b){let k;s=r,d===!0?_():(I="show",r.style.overflowY="hidden",k=r.scrollHeight),h(r,k,b),t=setTimeout(()=>{t=null,r.style.height=0,g=v=>{u=null,(Object(v)!==v||v.target===r)&&y(r,"hide")},r.addEventListener("transitionend",g),u=setTimeout(g,e.duration*1.1)},100)}return ne(()=>{d===!0&&_()}),()=>f(ye,{css:!1,appear:e.appear,onEnter:D,onLeave:L},a.default)}});const B=ke({}),$e=Object.keys(te);var Ee=G({name:"QExpansionItem",props:{...te,...be,...Le,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...we,"click","afterShow","afterHide"],setup(e,{slots:a,emit:n}){const{proxy:{$q:d}}=ee(),o=Qe(e,d),s=P(e.modelValue!==null?e.modelValue:e.defaultOpened),t=P(null),u=F(),{show:g,hide:I,toggle:_}=ve({showing:s});let h,y;const D=w(()=>`q-expansion-item q-item-type q-expansion-item--${s.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),L=w(()=>{if(e.contentInsetLevel===void 0)return null;const i=d.lang.rtl===!0?"Right":"Left";return{["padding"+i]:e.contentInsetLevel*56+"px"}}),r=w(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),b=w(()=>{const i={};return $e.forEach(T=>{i[T]=e[T]}),i}),k=w(()=>r.value===!0||e.expandIconToggle!==!0),v=w(()=>e.expandedIcon!==void 0&&s.value===!0?e.expandedIcon:e.expandIcon||d.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),Q=w(()=>e.disable!==!0&&(r.value===!0||e.expandIconToggle===!0)),l=w(()=>({expanded:s.value===!0,detailsId:e.targetUid,toggle:_,show:g,hide:I})),z=w(()=>{const i=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:d.lang.label[s.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":s.value===!0?"true":"false","aria-controls":u,"aria-label":i}});M(()=>e.group,i=>{y!==void 0&&y(),i!==void 0&&J()});function oe(i){r.value!==!0&&_(i),n("click",i)}function ie(i){i.keyCode===13&&W(i,!0)}function W(i,T){T!==!0&&t.value!==null&&t.value.focus(),_(i),Ae(i)}function se(){n("afterShow")}function re(){n("afterHide")}function J(){h===void 0&&(h=F()),s.value===!0&&(B[e.group]=h);const i=M(s,O=>{O===!0?B[e.group]=h:B[e.group]===h&&delete B[e.group]}),T=M(()=>B[e.group],(O,ge)=>{ge===h&&O!==void 0&&O!==h&&I()});y=()=>{i(),T(),B[e.group]===h&&delete B[e.group],y=void 0}}function le(){const i={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},T=[f(K,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&s.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:v.value})];return Q.value===!0&&(Object.assign(i,{tabindex:0,...z.value,onClick:W,onKeyup:ie}),T.unshift(f("div",{ref:t,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),f(R,i,()=>T)}function de(){let i;return a.header!==void 0?i=[].concat(a.header(l.value)):(i=[f(R,()=>[f(j,{lines:e.labelLines},()=>e.label||""),e.caption?f(j,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&i[e.switchToggleSide===!0?"push":"unshift"](f(R,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>f(K,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&i[e.switchToggleSide===!0?"unshift":"push"](le()),i}function ue(){const i={ref:"item",style:e.headerStyle,class:e.headerClass,dark:o.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return k.value===!0&&(i.clickable=!0,i.onClick=oe,Object.assign(i,r.value===!0?b.value:z.value)),f(Y,i,de)}function ce(){return ae(f("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:L.value,id:u},p(a.default)),[[xe,s.value]])}function fe(){const i=[ue(),f(je,{duration:e.duration,onShow:se,onHide:re},ce)];return e.expandSeparator===!0&&i.push(f(X,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:o.value}),f(X,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:o.value})),i}return e.group!==void 0&&J(),ne(()=>{y!==void 0&&y()}),()=>f("div",{class:D.value},[f("div",{class:"q-expansion-item__container relative-position"},fe())])}}),Ve={getUserRewardsAndSanctions(e,a){Ie.get(`/dha/rewardsandconduct/byteacher/${a}`).then(n=>{e(n.data)}).catch(n=>{console.error(n),console.log(n)})}};const Ue={data(){return{userRewardsAndSanctions:[],countOfRewardsAndSanctions:[],studentRewardsAndSanctions:[],loading:!0,filterOptions:["Year","Commendations","Minor Concerns","Serious Concerns","Distinctions","Copies"],filterBy:null}},computed:{userDetails(){return this.$store.getters["user/getUserDetails"]}},methods:{getUserRewardsandSanctions(){this.loading=!0,Ve.getUserRewardsAndSanctions(this.processUserRewardsandSanctions,this.userDetails.id)},processUserRewardsandSanctions(e){console.log("rewards list: ",e),this.userRewardsAndSanctions=e,this.countRewardsAndSanctions(),this.groupCommendationsByStudent(),this.loading=!1},filterRewards(e){console.log("filtering rewards by "+e);let a=null;switch(e){case"Year":a="year";break;case"Minor Concerns":a="MinorConcerns";break;case"Serious Concerns":a="SeriousConcerns";break;case"Commendations":a="Commendations";break;case"Distinctions":a="Distinctions";break;case"Copies":a="Copies";break;default:console.error("Unknown filter type: "+e)}this.studentRewardsAndSanctions.sort((n,d)=>d[a]-n[a])},countRewardsAndSanctions(){const e=this.userRewardsAndSanctions,a={};e.forEach(d=>{const{mis_id:o,firstname:s,lastname:t,year:u,moduleType_id:g}=d;switch(a[o]||(a[o]={mis_id:o,firstName:s,lastName:t,year:u,Commendations:0,Distinctions:0,Copies:0,MinorConcerns:0,SeriousConcerns:0}),g){case 4:a[o].Commendations++;break;case 6:a[o].Distinctions++;break;case 7:a[o].Copies++;break;case 11:a[o].MinorConcerns++;break;case 12:a[o].SeriousConcerns++;break}});const n=Object.values(a);n.sort((d,o)=>d.year-o.year),console.log(n),this.countOfRewardsAndSanctions=n},groupCommendationsByStudent(){const e=this.userRewardsAndSanctions.reduce((a,n)=>{const d=n.mis_id;let o=a.find(s=>s.mis_id===d);switch(o||(o={mis_id:n.mis_id,firstName:n.firstname,lastName:n.lastname,houseName:n.houseName,year:n.year,rewards:[],Commendations:0,Distinctions:0,Copies:0,MinorConcerns:0,SeriousConcerns:0},a.push(o)),o.rewards.push({id:n.id,description:n.description,dateAwarded:n.date_awarded,moduleType:n.moduleType,departmentName:n.departmentName}),n.moduleType_id){case 4:o.Commendations++;break;case 6:o.Distinctions++;break;case 7:o.Copies++;break;case 11:o.MinorConcerns++;break;case 12:o.SeriousConcerns++;break}return a},[]);this.studentRewardsAndSanctions=e,console.log(e)},getRewardIcon(e){switch(e){case"Commendation":return"fas fa-star";case"Distinction":return"fas fa-award";case"Minor Concern":return"fas fa-exclamation-triangle";case"Serious Concern":return"fas fa-star-exclamation";case"Copies":return"fas fa-jedi";default:return"fas fa-circle"}},getRewardColor(e){switch(e){case"Commendation":return"green";case"Distinction":return"purple";case"Minor Concern":return"red";case"Serious Concern":return"red";case"Copies":return"amber-5";default:return"grey"}}},mounted(){this.getUserRewardsandSanctions()}},Ye={class:"q-gutter-md"},Ke={key:1};function Fe(e,a,n,d,o,s){return m(),A(Ne,null,{default:c(()=>[S(he,null,{default:c(()=>[S(me,null,{default:c(()=>[x("My Rewards and Sanctions")]),_:1}),S(Pe,{flat:"",label:"Sort By"},{default:c(()=>[S($,null,{default:c(()=>[(m(!0),H(U,null,V(o.filterOptions,t=>ae((m(),A(Y,{key:t,clickable:"",onClick:u=>s.filterRewards(t)},{default:c(()=>[x(C(t),1)]),_:2},1032,["onClick"])),[[Me]])),128))]),_:1})]),_:1})]),_:1}),S($,{separator:"",bordered:""},{default:c(()=>[(m(!0),H(U,null,V(o.studentRewardsAndSanctions,t=>(m(),A(Ee,{key:t.mis_id,label:`${t.firstName} ${t.lastName} (Year ${t.year})`,"expand-separator":"","expand-icon":"fas fa-chevron-down"},{header:c(()=>[S(R,null,{default:c(()=>[x(C(t.firstName)+" "+C(t.lastName)+" (Year "+C(t.year)+")",1)]),_:2},1024),S(R,{side:""},{default:c(()=>[Be("div",Ye,[t.Commendations>0?(m(),A(q,{key:0,dense:"",icon:"fas fa-star",color:"green"},{default:c(()=>[x(C(t.Commendations),1)]),_:2},1024)):N("",!0),t.Distinctions>0?(m(),A(q,{key:1,dense:"",icon:"fas fa-award",color:"purple"},{default:c(()=>[x(C(t.Distinctions),1)]),_:2},1024)):N("",!0),t.Copies>0?(m(),A(q,{key:2,dense:"",icon:"fas fa-jedi",color:"amber-5"},{default:c(()=>[x(C(t.Copies),1)]),_:2},1024)):N("",!0),t.MinorConcerns>0?(m(),A(q,{key:3,dense:"",icon:"fas fa-exclamation-triangle",color:"red"},{default:c(()=>[x(C(t.MinorConcerns),1)]),_:2},1024)):N("",!0),t.SeriousConcerns>0?(m(),A(q,{key:4,dense:"",icon:"fas fa-star-exclamation",color:"red"},{default:c(()=>[x(C(t.SeriousConcerns),1)]),_:2},1024)):N("",!0)])]),_:2},1024)]),default:c(()=>[t.rewards.length>0?(m(),A($,{key:0},{default:c(()=>[(m(!0),H(U,null,V(t.rewards,u=>(m(),A(Y,{key:u.id},{default:c(()=>[S(R,null,{default:c(()=>[S(j,{caption:""},{default:c(()=>[x(C(u.dateAwarded),1)]),_:2},1024),S(j,null,{default:c(()=>[x(C(u.description),1)]),_:2},1024)]),_:2},1024),S(R,{side:""},{default:c(()=>[S(q,{dense:"",icon:s.getRewardIcon(u.moduleType),color:s.getRewardColor(u.moduleType)},{default:c(()=>[x(C(u.moduleType),1)]),_:2},1032,["icon","color"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)):(m(),H("div",Ke,"No rewards or sanctions available."))]),_:2},1032,["label"]))),128))]),_:1})]),_:1})}var ln=Te(Ue,[["render",Fe]]);export{ln as default};
