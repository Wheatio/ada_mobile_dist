import{y as ye,i as X,x as we,ad as be,q as Q,f,ak as S,r as C,X as pe,t as ke,j as v,al as qe,am as Ce,an as Pe,ag as xe,D as Y,g as Z,h as j,T as G,k as ee,ao as $e,m as V,H as b,J as Se,V as Te,ap as h}from"./index.a460bdca.js";import{u as Ee,a as Be,b as _e,c as Fe,d as De,e as He}from"./QItem.ff2d4a77.js";import{b as W,c as Qe,a as Me}from"./focus-manager.8e1b27e8.js";function ze(){let e;const t=Q();function n(){e=void 0}return ye(n),X(n),{removeTick:n,registerTick(o){e=o,we(()=>{e===o&&(be(t)===!1&&e(),e=void 0)})}}}const Ae={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function Le(e,t=()=>{},n=()=>{}){return{transitionProps:f(()=>{const o=`q-transition--${e.transitionShow||t()}`,i=`q-transition--${e.transitionHide||n()}`;return{appear:!0,enterFromClass:`${o}-enter-from`,enterActiveClass:`${o}-enter-active`,enterToClass:`${o}-enter-to`,leaveFromClass:`${i}-leave-from`,leaveActiveClass:`${i}-leave-active`,leaveToClass:`${i}-leave-to`}}),transitionStyle:f(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}const T=[];function Ye(e){return T.find(t=>t.contentEl!==null&&t.contentEl.contains(e))}function Oe(e,t){do{if(e.$options.name==="QMenu"){if(e.hide(t),e.$props.separateClosePopup===!0)return S(e)}else if(e.__qPortal===!0){const n=S(e);return n!==void 0&&n.$options.name==="QPopupProxy"?(e.hide(t),n):e}e=S(e)}while(e!=null)}function Ze(e,t,n){for(;n!==0&&e!==void 0&&e!==null;){if(e.__qPortal===!0){if(n--,e.$options.name==="QMenu"){e=Oe(e,t);continue}e.hide(t)}e=S(e)}}function Ke(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function Re(e,t,n,o){const i=C(!1),s=C(!1);let u=null;const r={},c=o==="dialog"&&Ke(e);function d(m){if(m===!0){W(r),s.value=!0;return}s.value=!1,i.value===!1&&(c===!1&&u===null&&(u=Ce(!1,o)),i.value=!0,T.push(e.proxy),Qe(r))}function g(m){if(s.value=!1,m!==!0)return;W(r),i.value=!1;const k=T.indexOf(e.proxy);k!==-1&&T.splice(k,1),u!==null&&(Pe(u),u=null)}return pe(()=>{g(!0)}),e.proxy.__qPortal=!0,ke(e.proxy,"contentEl",()=>t.value),{showPortal:d,hidePortal:g,portalIsActive:i,portalIsAccessible:s,renderPortal:()=>c===!0?n():i.value===!0?[v(qe,{to:u},n())]:void 0}}const y=[];let p;function Ie(e){p=e.keyCode===27}function je(){p===!0&&(p=!1)}function Ge(e){p===!0&&(p=!1,xe(e,27)===!0&&y[y.length-1](e))}function te(e){window[e]("keydown",Ie),window[e]("blur",je),window[e]("keyup",Ge),p=!1}function Ve(e){Y.is.desktop===!0&&(y.push(e),y.length===1&&te("addEventListener"))}function N(e){const t=y.indexOf(e);t>-1&&(y.splice(t,1),y.length===0&&te("removeEventListener"))}const w=[];function ne(e){w[w.length-1](e)}function We(e){Y.is.desktop===!0&&(w.push(e),w.length===1&&document.body.addEventListener("focusin",ne))}function U(e){const t=w.indexOf(e);t>-1&&(w.splice(t,1),w.length===0&&document.body.removeEventListener("focusin",ne))}let $=0;const Ne={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},J={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]};var et=Z({name:"QDialog",inheritAttrs:!1,props:{...Ee,...Ae,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,position:{type:String,default:"standard",validator:e=>e==="standard"||["top","bottom","left","right"].includes(e)}},emits:[...Be,"shake","click","escapeKey"],setup(e,{slots:t,emit:n,attrs:o}){const i=Q(),s=C(null),u=C(!1),r=C(!1);let c=null,d=null,g,m;const k=f(()=>e.persistent!==!0&&e.noRouteDismiss!==!0&&e.seamless!==!0),{preventBodyScroll:M}=He(),{registerTimeout:z}=_e(),{registerTick:ae,removeTick:A}=ze(),{transitionProps:oe,transitionStyle:L}=Le(e,()=>J[e.position][0],()=>J[e.position][1]),{showPortal:O,hidePortal:K,portalIsAccessible:ie,renderPortal:se}=Re(i,s,ve,"dialog"),{hide:P}=Fe({showing:u,hideOnRouteChange:k,handleShow:fe,handleHide:ge,processOnMount:!0}),{addToHistory:le,removeFromHistory:ue}=De(u,P,k),re=f(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${e.maximized===!0?"maximized":"minimized"} q-dialog__inner--${e.position} ${Ne[e.position]}`+(r.value===!0?" q-dialog__inner--animating":"")+(e.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(e.fullHeight===!0?" q-dialog__inner--fullheight":"")+(e.square===!0?" q-dialog__inner--square":"")),x=f(()=>u.value===!0&&e.seamless!==!0),ce=f(()=>e.autoClose===!0?{onClick:me}:{}),de=f(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${x.value===!0?"modal":"seamless"}`,o.class]);j(()=>e.maximized,a=>{u.value===!0&&_(a)}),j(x,a=>{M(a),a===!0?(We(F),Ve(B)):(U(F),N(B))});function fe(a){le(),d=e.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,_(e.maximized),O(),r.value=!0,e.noFocus!==!0?(document.activeElement!==null&&document.activeElement.blur(),ae(q)):A(),z(()=>{if(i.proxy.$q.platform.is.ios===!0){if(e.seamless!==!0&&document.activeElement){const{top:l,bottom:D}=document.activeElement.getBoundingClientRect(),{innerHeight:I}=window,H=window.visualViewport!==void 0?window.visualViewport.height:I;l>0&&D>H/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-H,D>=I?1/0:Math.ceil(document.scrollingElement.scrollTop+D-H/2))),document.activeElement.scrollIntoView()}m=!0,s.value.click(),m=!1}O(!0),r.value=!1,n("show",a)},e.transitionDuration)}function ge(a){A(),ue(),R(!0),r.value=!0,K(),d!==null&&(((a&&a.type.indexOf("key")===0?d.closest('[tabindex]:not([tabindex^="-"])'):void 0)||d).focus(),d=null),z(()=>{K(!0),r.value=!1,n("hide",a)},e.transitionDuration)}function q(a){Me(()=>{let l=s.value;l===null||l.contains(document.activeElement)===!0||(l=(a!==""?l.querySelector(a):null)||l.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||l.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||l.querySelector("[autofocus], [data-autofocus]")||l,l.focus({preventScroll:!0}))})}function E(a){a&&typeof a.focus=="function"?a.focus({preventScroll:!0}):q(),n("shake");const l=s.value;l!==null&&(l.classList.remove("q-animate--scale"),l.classList.add("q-animate--scale"),c!==null&&clearTimeout(c),c=setTimeout(()=>{c=null,s.value!==null&&(l.classList.remove("q-animate--scale"),q())},170))}function B(){e.seamless!==!0&&(e.persistent===!0||e.noEscDismiss===!0?e.maximized!==!0&&e.noShake!==!0&&E():(n("escapeKey"),P()))}function R(a){c!==null&&(clearTimeout(c),c=null),(a===!0||u.value===!0)&&(_(!1),e.seamless!==!0&&(M(!1),U(F),N(B))),a!==!0&&(d=null)}function _(a){a===!0?g!==!0&&($<1&&document.body.classList.add("q-body--dialog"),$++,g=!0):g===!0&&($<2&&document.body.classList.remove("q-body--dialog"),$--,g=!1)}function me(a){m!==!0&&(P(a),n("click",a))}function he(a){e.persistent!==!0&&e.noBackdropDismiss!==!0?P(a):e.noShake!==!0&&E()}function F(a){e.allowFocusOutside!==!0&&ie.value===!0&&$e(s.value,a.target)!==!0&&q('[tabindex]:not([tabindex="-1"])')}Object.assign(i.proxy,{focus:q,shake:E,__updateRefocusTarget(a){d=a||null}}),X(R);function ve(){return v("div",{role:"dialog","aria-modal":x.value===!0?"true":"false",...o,class:de.value},[v(G,{name:"q-transition--fade",appear:!0},()=>x.value===!0?v("div",{class:"q-dialog__backdrop fixed-full",style:L.value,"aria-hidden":"true",tabindex:-1,onClick:he}):null),v(G,oe.value,()=>u.value===!0?v("div",{ref:s,class:re.value,style:L.value,tabindex:-1,...ce.value},ee(t.default)):null)])}return se}}),tt=Z({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:t}){const{proxy:{$q:n}}=Q(),o=V(Se,b);if(o===b)return console.error("QPage needs to be a deep child of QLayout"),b;if(V(Te,b)===b)return console.error("QPage needs to be child of QPageContainer"),b;const s=f(()=>{const r=(o.header.space===!0?o.header.size:0)+(o.footer.space===!0?o.footer.size:0);if(typeof e.styleFn=="function"){const c=o.isContainer.value===!0?o.containerHeight.value:n.screen.height;return e.styleFn(r,c)}return{minHeight:o.isContainer.value===!0?o.containerHeight.value-r+"px":n.screen.height===0?r!==0?`calc(100vh - ${r}px)`:"100vh":n.screen.height-r+"px"}}),u=f(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>v("main",{class:u.value,style:s.value},ee(t.default))}}),nt={getStudentList(e){h.get("/students/all").then(t=>{e(t.data)}).catch(t=>{console.log(t)})},getStaffDetails(e,t){h.get(`/users/details/${t}`).then(n=>{e(n.data)}).catch(n=>{console.log(n)})},getRewardCategories(e,t,n){h.get(`dha/rewardsandconduct/moduleTypes/${t.id}/categories`).then(o=>{e(o.data,t,n)}).catch(o=>{console.log(o)})},postAward(e,t,n,o){h.post(`dha/rewardsandconduct/students/${n}/reward`,o).then(i=>{e(i.data)}).catch(i=>{t(i),console.log(i)})},getClasses(e){h.get("/dha/classes").then(t=>{e(t.data)}).catch(t=>{console.log(t)})},getStudentsInAllClasses(e){h.get("/home/classes").then(t=>{e(t.data)}).catch(t=>{console.log(t)})},getPhoto(e,t){h.get(`/dha/students/${t}/photos/current`,{responseType:"arraybuffer"}).then(n=>{let o=btoa(new Uint8Array(n.data).reduce((i,s)=>i+String.fromCharCode(s),""));e(o)})}};export{tt as Q,nt as a,et as b,Ze as c,ze as d,Le as e,Re as f,Ye as g,We as h,N as i,Oe as j,Ve as k,T as p,U as r,Ae as u};
