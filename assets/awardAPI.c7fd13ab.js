import{g as z,f,j as m,k as M,q as Q,y as he,i as J,x as ve,ad as we,ak as x,r as C,X as be,t as qe,al as ke,am as ye,an as Ce,ag as Se,D as Y,h as G,T as W,ao as Pe,ap as b}from"./index.d799afc4.js";import{u as pe,a as xe}from"./use-dark.8287b9f4.js";import{u as Te,a as _e,b as Be,c as Ee,d as $e,e as De}from"./QItem.2c5ef4b6.js";import{b as N,c as Fe,a as ze}from"./focus-manager.8e1b27e8.js";var Je=z({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:t}){const a=f(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>m(e.tag,{class:a.value},M(t.default))}}),Ye=z({name:"QCard",props:{...pe,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:t}){const{proxy:{$q:a}}=Q(),o=xe(e,a),i=f(()=>"q-card"+(o.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>m(e.tag,{class:i.value},M(t.default))}});function Me(){let e;const t=Q();function a(){e=void 0}return he(a),J(a),{removeTick:a,registerTick(o){e=o,ve(()=>{e===o&&(we(t)===!1&&e(),e=void 0)})}}}const Qe={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function He(e,t=()=>{},a=()=>{}){return{transitionProps:f(()=>{const o=`q-transition--${e.transitionShow||t()}`,i=`q-transition--${e.transitionHide||a()}`;return{appear:!0,enterFromClass:`${o}-enter-from`,enterActiveClass:`${o}-enter-active`,enterToClass:`${o}-enter-to`,leaveFromClass:`${i}-leave-from`,leaveActiveClass:`${i}-leave-active`,leaveToClass:`${i}-leave-to`}}),transitionStyle:f(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}const T=[];function Ze(e){return T.find(t=>t.contentEl!==null&&t.contentEl.contains(e))}function Ae(e,t){do{if(e.$options.name==="QMenu"){if(e.hide(t),e.$props.separateClosePopup===!0)return x(e)}else if(e.__qPortal===!0){const a=x(e);return a!==void 0&&a.$options.name==="QPopupProxy"?(e.hide(t),a):e}e=x(e)}while(e!=null)}function et(e,t,a){for(;a!==0&&e!==void 0&&e!==null;){if(e.__qPortal===!0){if(a--,e.$options.name==="QMenu"){e=Ae(e,t);continue}e.hide(t)}e=x(e)}}function Le(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function Oe(e,t,a,o){const i=C(!1),l=C(!1);let u=null;const c={},r=o==="dialog"&&Le(e);function d(h){if(h===!0){N(c),l.value=!0;return}l.value=!1,i.value===!1&&(r===!1&&u===null&&(u=ye(!1,o)),i.value=!0,T.push(e.proxy),Fe(c))}function g(h){if(l.value=!1,h!==!0)return;N(c),i.value=!1;const k=T.indexOf(e.proxy);k!==-1&&T.splice(k,1),u!==null&&(Ce(u),u=null)}return be(()=>{g(!0)}),e.proxy.__qPortal=!0,qe(e.proxy,"contentEl",()=>t.value),{showPortal:d,hidePortal:g,portalIsActive:i,portalIsAccessible:l,renderPortal:()=>r===!0?a():i.value===!0?[m(ke,{to:u},a())]:void 0}}const v=[];let q;function Re(e){q=e.keyCode===27}function Ie(){q===!0&&(q=!1)}function Ke(e){q===!0&&(q=!1,Se(e,27)===!0&&v[v.length-1](e))}function Z(e){window[e]("keydown",Re),window[e]("blur",Ie),window[e]("keyup",Ke),q=!1}function je(e){Y.is.desktop===!0&&(v.push(e),v.length===1&&Z("addEventListener"))}function U(e){const t=v.indexOf(e);t>-1&&(v.splice(t,1),v.length===0&&Z("removeEventListener"))}const w=[];function ee(e){w[w.length-1](e)}function Ge(e){Y.is.desktop===!0&&(w.push(e),w.length===1&&document.body.addEventListener("focusin",ee))}function V(e){const t=w.indexOf(e);t>-1&&(w.splice(t,1),w.length===0&&document.body.removeEventListener("focusin",ee))}let p=0;const We={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},X={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]};var tt=z({name:"QDialog",inheritAttrs:!1,props:{...Te,...Qe,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,position:{type:String,default:"standard",validator:e=>e==="standard"||["top","bottom","left","right"].includes(e)}},emits:[..._e,"shake","click","escapeKey"],setup(e,{slots:t,emit:a,attrs:o}){const i=Q(),l=C(null),u=C(!1),c=C(!1);let r=null,d=null,g,h;const k=f(()=>e.persistent!==!0&&e.noRouteDismiss!==!0&&e.seamless!==!0),{preventBodyScroll:H}=De(),{registerTimeout:A}=Be(),{registerTick:te,removeTick:L}=Me(),{transitionProps:ae,transitionStyle:O}=He(e,()=>X[e.position][0],()=>X[e.position][1]),{showPortal:R,hidePortal:I,portalIsAccessible:ne,renderPortal:oe}=Oe(i,l,ge,"dialog"),{hide:S}=Ee({showing:u,hideOnRouteChange:k,handleShow:ce,handleHide:de,processOnMount:!0}),{addToHistory:ie,removeFromHistory:se}=$e(u,S,k),le=f(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${e.maximized===!0?"maximized":"minimized"} q-dialog__inner--${e.position} ${We[e.position]}`+(c.value===!0?" q-dialog__inner--animating":"")+(e.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(e.fullHeight===!0?" q-dialog__inner--fullheight":"")+(e.square===!0?" q-dialog__inner--square":"")),P=f(()=>u.value===!0&&e.seamless!==!0),ue=f(()=>e.autoClose===!0?{onClick:fe}:{}),re=f(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${P.value===!0?"modal":"seamless"}`,o.class]);G(()=>e.maximized,n=>{u.value===!0&&E(n)}),G(P,n=>{H(n),n===!0?(Ge($),je(B)):(V($),U(B))});function ce(n){ie(),d=e.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,E(e.maximized),R(),c.value=!0,e.noFocus!==!0?(document.activeElement!==null&&document.activeElement.blur(),te(y)):L(),A(()=>{if(i.proxy.$q.platform.is.ios===!0){if(e.seamless!==!0&&document.activeElement){const{top:s,bottom:D}=document.activeElement.getBoundingClientRect(),{innerHeight:j}=window,F=window.visualViewport!==void 0?window.visualViewport.height:j;s>0&&D>F/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-F,D>=j?1/0:Math.ceil(document.scrollingElement.scrollTop+D-F/2))),document.activeElement.scrollIntoView()}h=!0,l.value.click(),h=!1}R(!0),c.value=!1,a("show",n)},e.transitionDuration)}function de(n){L(),se(),K(!0),c.value=!0,I(),d!==null&&(((n&&n.type.indexOf("key")===0?d.closest('[tabindex]:not([tabindex^="-"])'):void 0)||d).focus(),d=null),A(()=>{I(!0),c.value=!1,a("hide",n)},e.transitionDuration)}function y(n){ze(()=>{let s=l.value;s===null||s.contains(document.activeElement)===!0||(s=(n!==""?s.querySelector(n):null)||s.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||s.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||s.querySelector("[autofocus], [data-autofocus]")||s,s.focus({preventScroll:!0}))})}function _(n){n&&typeof n.focus=="function"?n.focus({preventScroll:!0}):y(),a("shake");const s=l.value;s!==null&&(s.classList.remove("q-animate--scale"),s.classList.add("q-animate--scale"),r!==null&&clearTimeout(r),r=setTimeout(()=>{r=null,l.value!==null&&(s.classList.remove("q-animate--scale"),y())},170))}function B(){e.seamless!==!0&&(e.persistent===!0||e.noEscDismiss===!0?e.maximized!==!0&&e.noShake!==!0&&_():(a("escapeKey"),S()))}function K(n){r!==null&&(clearTimeout(r),r=null),(n===!0||u.value===!0)&&(E(!1),e.seamless!==!0&&(H(!1),V($),U(B))),n!==!0&&(d=null)}function E(n){n===!0?g!==!0&&(p<1&&document.body.classList.add("q-body--dialog"),p++,g=!0):g===!0&&(p<2&&document.body.classList.remove("q-body--dialog"),p--,g=!1)}function fe(n){h!==!0&&(S(n),a("click",n))}function me(n){e.persistent!==!0&&e.noBackdropDismiss!==!0?S(n):e.noShake!==!0&&_()}function $(n){e.allowFocusOutside!==!0&&ne.value===!0&&Pe(l.value,n.target)!==!0&&y('[tabindex]:not([tabindex="-1"])')}Object.assign(i.proxy,{focus:y,shake:_,__updateRefocusTarget(n){d=n||null}}),J(K);function ge(){return m("div",{role:"dialog","aria-modal":P.value===!0?"true":"false",...o,class:re.value},[m(W,{name:"q-transition--fade",appear:!0},()=>P.value===!0?m("div",{class:"q-dialog__backdrop fixed-full",style:O.value,"aria-hidden":"true",tabindex:-1,onClick:me}):null),m(W,ae.value,()=>u.value===!0?m("div",{ref:l,class:le.value,style:O.value,tabindex:-1,...ue.value},M(t.default)):null)])}return oe}}),at={getStudentList(e){b.get("/students/all").then(t=>{e(t.data)}).catch(t=>{console.log(t)})},getStaffDetails(e,t){b.get(`/users/details/${t}`).then(a=>{e(a.data)}).catch(a=>{console.log(a)})},getRewardCategories(e,t,a){b.get(`dha/rewardsandconduct/moduleTypes/${t.id}/categories`).then(o=>{e(o.data,t,a)}).catch(o=>{console.log(o)})},postAward(e,t,a,o){b.post(`dha/rewardsandconduct/students/${a}/reward`,o).then(i=>{e(i.data)}).catch(i=>{t(i),console.log(i)})},getClasses(e){b.get("/dha/classes").then(t=>{e(t.data)}).catch(t=>{console.log(t)})},getPhoto(e,t){b.get(`/dha/students/${t}/photos/current`,{responseType:"arraybuffer"}).then(a=>{let o=btoa(new Uint8Array(a.data).reduce((i,l)=>i+String.fromCharCode(l),""));e(o)})}};export{Ye as Q,at as a,Je as b,tt as c,Me as d,He as e,Oe as f,Ge as g,U as h,Ae as i,je as j,Ze as k,et as l,T as p,V as r,Qe as u};
