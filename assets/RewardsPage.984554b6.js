import{a as T,Q as L}from"./QToolbar.45281acf.js";import{b as A,a as D,Q as R}from"./QItem.b5da8b2b.js";import{h as F,aA as V,r as Q,g as C,i as q,p as z,k as b,f as E,l as K,Q as k,t as W,aB as Y,u as G,al as J,_ as X,o as d,I as c,w as r,d as m,J as u,c as M,M as O,F as x,$ as Z,K as f,a as p,e as h}from"./index.0835d3cd.js";import{Q as ee}from"./QBtnGroup.f2b8ed24.js";import{a as ne,Q as g}from"./QMenu.9c0ae8ce.js";import{u as ae}from"./focusout.fbc56a61.js";import{u as te}from"./focus-manager.8e1b27e8.js";import{Q as oe}from"./QPage.aea7938e.js";import{C as se}from"./ClosePopup.8d7c1adc.js";import"./use-dark.e535c535.js";import"./selection.d17b1b0c.js";import"./use-tick.a35a1ec4.js";import"./use-timeout.275153e9.js";const re=Object.keys(V),ie=e=>re.reduce((n,t)=>{const i=e[t];return i!==void 0&&(n[t]=i),n},{});var le=F({name:"QBtnDropdown",props:{...V,...ae,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:n,emit:t}){const{proxy:i}=W(),s=Q(e.modelValue),l=Q(null),o=te(),w=C(()=>{const a={"aria-expanded":s.value===!0?"true":"false","aria-haspopup":"true","aria-controls":o,"aria-label":e.toggleAriaLabel||i.$q.lang.label[s.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(a["aria-disabled"]="true"),a}),S=C(()=>"q-btn-dropdown__arrow"+(s.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),v=C(()=>Y(e)),y=C(()=>ie(e));q(()=>e.modelValue,a=>{l.value!==null&&l.value[a?"show":"hide"]()}),q(()=>e.split,_);function I(a){s.value=!0,t("beforeShow",a)}function P(a){t("show",a),t("update:modelValue",!0)}function U(a){s.value=!1,t("beforeHide",a)}function N(a){t("hide",a),t("update:modelValue",!1)}function H(a){t("click",a)}function $(a){G(a),_(),t("click",a)}function j(a){l.value!==null&&l.value.toggle(a)}function B(a){l.value!==null&&l.value.show(a)}function _(a){l.value!==null&&l.value.hide(a)}return Object.assign(i,{show:B,hide:_,toggle:j}),z(()=>{e.modelValue===!0&&B()}),()=>{const a=[b(E,{class:S.value,name:e.dropdownIcon||i.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&a.push(b(ne,{ref:l,id:o,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:I,onShow:P,onBeforeHide:U,onHide:N},n.default)),e.split===!1?b(k,{class:"q-btn-dropdown q-btn-dropdown--simple",...y.value,...w.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:H},{default:()=>K(n.label,[]).concat(a),loading:n.loading}):b(ee,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...v.value,glossy:e.glossy,stretch:e.stretch},()=>[b(k,{class:"q-btn-dropdown--current",...y.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:$},{default:n.label,loading:n.loading}),b(k,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...w.value,...v.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>a)])}}}),de={getUserRewardsAndSanctions(e,n){J.get(`/dha/rewardsandconduct/byteacher/${n}`).then(t=>{e(t.data)}).catch(t=>{errorFn(t),console.log(t)})}};const ce={data(){return{userRewardsAndSanctions:[],countOfRewardsAndSanctions:[],loading:!0,filterOptions:["Year","Commendations","Minor Concerns","Serious Concerns","Distinctions","Copies"],filterBy:null}},computed:{userDetails(){return this.$store.getters["user/getUserDetails"]}},methods:{getUserRewardsandSanctions(){this.loading=!0,de.getUserRewardsAndSanctions(this.processUserRewardsandSanctions,this.userDetails.id)},processUserRewardsandSanctions(e){this.userRewardsAndSanctions=e,this.countRewardsAndSanctions(),this.loading=!1},filterRewards(e){console.log("filtering rewards by "+e);let n=null;switch(e){case"Year":n="year";break;case"Minor Concerns":n="MinorConcerns";break;case"Serious Concerns":n="SeriousConcerns";break;case"Commendations":n="Commendations";break;case"Distinctions":n="Distinctions";break;case"Copies":n="Copies";break;default:console.error("Unknown filter type: "+e)}this.countOfRewardsAndSanctions.sort((t,i)=>i[n]-t[n])},countRewardsAndSanctions(){const e=this.userRewardsAndSanctions,n={};e.forEach(i=>{const{mis_id:s,firstname:l,lastname:o,year:w,moduleType_id:S}=i;switch(n[s]||(n[s]={mis_id:s,firstName:l,lastName:o,year:w,Commendations:0,Distinctions:0,Copies:0,MinorConcerns:0,SeriousConcerns:0}),S){case 4:n[s].Commendations++;break;case 6:n[s].Distinctions++;break;case 7:n[s].Copies++;break;case 11:n[s].MinorConcerns++;break;case 12:n[s].SeriousConcerns++;break}});const t=Object.values(n);t.sort((i,s)=>i.year-s.year),console.log(t),this.countOfRewardsAndSanctions=t}},mounted(){this.getUserRewardsandSanctions()}},ue={class:"q-gutter-md"};function fe(e,n,t,i,s,l){return d(),c(oe,null,{default:r(()=>[m(L,null,{default:r(()=>[m(T,null,{default:r(()=>[u("My Rewards and Sanctions")]),_:1}),m(le,{flat:"",label:"Sort By"},{default:r(()=>[m(A,null,{default:r(()=>[(d(!0),M(x,null,O(s.filterOptions,o=>Z((d(),c(D,{key:o,clickable:"",onClick:w=>l.filterRewards(o)},{default:r(()=>[u(f(o),1)]),_:2},1032,["onClick"])),[[se]])),128))]),_:1})]),_:1})]),_:1}),m(A,{separator:"",bordered:""},{default:r(()=>[(d(!0),M(x,null,O(s.countOfRewardsAndSanctions,o=>(d(),c(D,{key:o.mis_id},{default:r(()=>[m(R,null,{default:r(()=>[u(f(o.firstName)+" "+f(o.lastName),1)]),_:2},1024),m(R,{side:""},{default:r(()=>[p("div",ue,[o.Commendations>0?(d(),c(g,{key:0,dense:"",icon:"fas fa-star",color:"green"},{default:r(()=>[u(f(o.Commendations),1)]),_:2},1024)):h("",!0),o.Distinctions>0?(d(),c(g,{key:1,dense:"",icon:"fas fa-award",color:"purple"},{default:r(()=>[u(f(o.Distinctions),1)]),_:2},1024)):h("",!0),o.Copies>0?(d(),c(g,{key:2,dense:"",icon:"fas fa-jedi",color:"amber-5"},{default:r(()=>[u(f(o.Copies),1)]),_:2},1024)):h("",!0),o.MinorConcerns>0?(d(),c(g,{key:3,dense:"",icon:"fas fa-exclamation-triangle",color:"red"},{default:r(()=>[u(f(o.MinorConcerns),1)]),_:2},1024)):h("",!0),o.SeriousConcerns>0?(d(),c(g,{key:4,dense:"",icon:"fas fa-star-exclamation",color:"red"},{default:r(()=>[u(f(o.SeriousConcerns),1)]),_:2},1024)):h("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})}var De=X(ce,[["render",fe]]);export{De as default};
