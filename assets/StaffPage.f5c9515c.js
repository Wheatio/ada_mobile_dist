import{Q as w}from"./QPage.43b01384.js";import{a as i,Q as g}from"./QCard.a4c39aef.js";import{Q as v}from"./QBtnToggle.0d87bb6b.js";import{Q as b}from"./QTable.41b3d051.js";import{aE as C,_ as c,o as d,I as f,w as o,d as a,a as u,K as A,e as S,L as p}from"./index.093bcec8.js";import{d as h}from"./dashboardAPI.bc347689.js";import"./use-dark.8d7a4edf.js";import"./QBtnGroup.3859936e.js";import"./use-key-composition.ea1b4e82.js";import"./focus-manager.8e1b27e8.js";import"./QSeparator.c85c9878.js";import"./QItem.ea354670.js";import"./QSelect.f99525f5.js";import"./QMenu.308dbf8e.js";import"./selection.eefade81.js";import"./focusout.7793a9df.js";import"./use-tick.e2711675.js";import"./use-timeout.07372709.js";import"./QDialog.40543d0d.js";import"./use-prevent-scroll.dbc91ef6.js";import"./rtl.b51694b1.js";import"./format.a33550d6.js";import"./QCheckbox.b4b147d5.js";const D={data(){return{loading:!1,tab:9,tabOptions:[{label:"9",value:9},{label:"10",value:10},{label:"11",value:11},{label:"12",value:12},{label:"13",value:13}],columns:[{name:"class",label:"Class",field:"code",align:"left",required:!0},{name:"staff",label:"Staff",field:"teacher1",align:"left"},{name:"teacher1",label:"Teacher A",field:"teacher1",align:"left"},{name:"teacher2",label:"Teacher B",field:"teacher2",align:"left"}],rows:[],visibleCols:["staff"],subjectClassStaffing:[],classStaffingFilter:9,pagination:{rowsPerPage:0}}},watch:{tab(e){e===12||e===13?this.visibleCols=["teacher1","teacher2"]:this.visibleCols=["staff"],this.classStaffingFilter=e}},computed:{...C({userData:"user/getUserDetails",userClasses:"user/getUserClasses",globalSubject:"user/getGlobalSubject"}),filteredClassStaffingList(){return this.subjectClassStaffing.length<1?void 0:this.subjectClassStaffing.filter(s=>s.year===this.tab)}},methods:{getClassStaffing(){this.loading=!0,h.getClassStaffing(this.processClassStaffing,this.globalSubject)},processClassStaffing(e){this.subjectClassStaffing=e,this.loading=!1}},watch:{globalSubject(e){this.getClassStaffing()}},mounted(){this.getClassStaffing()}},j={class:"text-bold"};function q(e,s,n,m,t,r){return t.loading?S("",!0):(d(),f(g,{key:0,rounded:""},{default:o(()=>[a(i,{class:"q-pb-xs"},{default:o(()=>[u("span",j,"Class Staffing - Year: "+A(t.tab),1)]),_:1}),a(i,{class:"q-pa-xs"},{default:o(()=>[a(v,{modelValue:t.tab,"onUpdate:modelValue":s[0]||(s[0]=l=>t.tab=l),options:t.tabOptions,flat:""},null,8,["modelValue","options"])]),_:1}),a(i,{class:"q-pt-xs"},{default:o(()=>[a(b,{flat:"",dense:"","hide-bottom":"",columns:t.columns,rows:r.filteredClassStaffingList,"visible-columns":t.visibleCols,pagination:t.pagination},null,8,["columns","rows","visible-columns","pagination"])]),_:1})]),_:1}))}var x=c(D,[["render",q]]);const R={data(){return{loading:!0,columns:[{name:"teacher",label:"Staff",field:"initials",align:"left",required:!0},{name:"commendations",label:"Comm",field:"commendations",align:"center",sortable:!0,required:!1},{name:"distinctions",label:"Dist",field:"distinctions",align:"center",sortable:!0,required:!1},{name:"copies",label:"Copies",field:"copies",align:"center",sortable:!0,required:!1},{name:"minorConcerns",label:"Min",field:"minorConcerns",align:"center",sortable:!0,required:!1},{name:"seriousConcerns",label:"Ser",field:"seriousConcerns",align:"center",sortable:!0,required:!1}],getRewardsAndSanctionsCount:[],pagination:{rowsPerPage:0}}},methods:{getRewardsAndSanctionData(){this.loading=!0,console.log("glabalSubject = ",this.globalSubject),h.getRewardsAndSanctionsCount(this.globalSubject,this.processRewardsAndSanctionData)},processRewardsAndSanctionData(e){const s=this.flattenRewardsAndSanctionData(e);this.rewardsAndSanctionsCount=s,this.loading=!1},flattenRewardsAndSanctionData(e){return e.map(s=>{const n=s.rewardsAndSanctionsCount[0];return{initials:s.initials,code:s.code,commendations:n.Commendations,distinctions:n.Distinctions,copies:n.Copies,minorConcerns:n.MinorConcerns,seriousConcerns:n.SeriousConcerns}})}},computed:{...C({userData:"user/getUserDetails",userClasses:"user/getUserClasses",globalSubject:"user/getGlobalSubject"})},watch:{globalSubject(e){this.getRewardsAndSanctionData()}},mounted(){this.getRewardsAndSanctionData()}},Q=u("span",{class:"text-bold"},"Rewards & Conduct",-1);function P(e,s,n,m,t,r){return t.loading?S("",!0):(d(),f(g,{key:0,rounded:""},{default:o(()=>[a(i,{class:"q-pb-xs"},{default:o(()=>[Q]),_:1}),a(i,{class:"q-pt-xs"},{default:o(()=>[a(b,{flat:"",dense:"","hide-bottom":"",columns:t.columns,rows:e.rewardsAndSanctionsCount,pagination:t.pagination},null,8,["columns","rows","pagination"])]),_:1})]),_:1}))}var T=c(R,[["render",P]]);const V={components:{StaffClassTableCard:x,StaffRewardsCard:T},data(){return{}}},$={class:"q-px-md row items-start q-gutter-md"};function B(e,s,n,m,t,r){const l=p("StaffClassTableCard"),_=p("StaffRewardsCard");return d(),f(w,null,{default:o(()=>[u("div",$,[a(l),a(_)])]),_:1})}var ne=c(V,[["render",B]]);export{ne as default};
