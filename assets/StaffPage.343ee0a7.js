import{Q as w}from"./QPage.aea7938e.js";import{a as i,Q as g}from"./QCard.31e04df3.js";import{Q as v}from"./QBtnToggle.80a12644.js";import{Q as b}from"./QTable.87be2bec.js";import{aC as C,_ as c,o as d,I as f,w as o,d as a,a as u,K as A,e as S,L as p}from"./index.0835d3cd.js";import{d as h}from"./dashboardAPI.5af1c388.js";import"./use-dark.e535c535.js";import"./QBtnGroup.f2b8ed24.js";import"./use-key-composition.c69b71c6.js";import"./focus-manager.8e1b27e8.js";import"./QItem.b5da8b2b.js";import"./QSelect.9981794d.js";import"./QMenu.9c0ae8ce.js";import"./selection.d17b1b0c.js";import"./focusout.fbc56a61.js";import"./use-tick.a35a1ec4.js";import"./use-timeout.275153e9.js";import"./format.1c072718.js";import"./QDialog.88cddf69.js";import"./use-prevent-scroll.f779b089.js";import"./rtl.b51694b1.js";import"./QCheckbox.6bb5f927.js";const D={data(){return{loading:!1,tab:9,tabOptions:[{label:"9",value:9},{label:"10",value:10},{label:"11",value:11},{label:"12",value:12},{label:"13",value:13}],columns:[{name:"class",label:"Class",field:"code",align:"left",required:!0},{name:"staff",label:"Staff",field:"teacher1",align:"left"},{name:"teacher1",label:"Teacher A",field:"teacher1",align:"left"},{name:"teacher2",label:"Teacher B",field:"teacher2",align:"left"}],rows:[],visibleCols:["staff"],subjectClassStaffing:[],classStaffingFilter:9,pagination:{rowsPerPage:0}}},watch:{tab(e){e===12||e===13?this.visibleCols=["teacher1","teacher2"]:this.visibleCols=["staff"],this.classStaffingFilter=e}},computed:{...C({userData:"user/getUserDetails",userClasses:"user/getUserClasses",globalSubject:"user/getGlobalSubject"}),filteredClassStaffingList(){return this.subjectClassStaffing.length<1?void 0:this.subjectClassStaffing.filter(s=>s.year===this.tab)}},methods:{getClassStaffing(){this.loading=!0,h.getClassStaffing(this.processClassStaffing,this.globalSubject)},processClassStaffing(e){this.subjectClassStaffing=e,this.loading=!1}},watch:{globalSubject(e){this.getClassStaffing()}},mounted(){this.getClassStaffing()}},j={class:"text-bold"};function q(e,s,n,m,t,l){return t.loading?S("",!0):(d(),f(g,{key:0,rounded:""},{default:o(()=>[a(i,{class:"q-pb-xs"},{default:o(()=>[u("span",j,"Class Staffing - Year: "+A(t.tab),1)]),_:1}),a(i,{class:"q-pa-xs"},{default:o(()=>[a(v,{modelValue:t.tab,"onUpdate:modelValue":s[0]||(s[0]=r=>t.tab=r),options:t.tabOptions,flat:""},null,8,["modelValue","options"])]),_:1}),a(i,{class:"q-pt-xs"},{default:o(()=>[a(b,{flat:"",dense:"","hide-bottom":"",columns:t.columns,rows:l.filteredClassStaffingList,"visible-columns":t.visibleCols,pagination:t.pagination},null,8,["columns","rows","visible-columns","pagination"])]),_:1})]),_:1}))}var x=c(D,[["render",q]]);const R={data(){return{loading:!0,columns:[{name:"teacher",label:"Staff",field:"initials",align:"left",required:!0},{name:"commendations",label:"Comm",field:"commendations",align:"center",sortable:!0,required:!1},{name:"distinctions",label:"Dist",field:"distinctions",align:"center",sortable:!0,required:!1},{name:"copies",label:"Copies",field:"copies",align:"center",sortable:!0,required:!1},{name:"minorConcerns",label:"Min",field:"minorConcerns",align:"center",sortable:!0,required:!1},{name:"seriousConcerns",label:"Ser",field:"seriousConcerns",align:"center",sortable:!0,required:!1}],getRewardsAndSanctionsCount:[],pagination:{rowsPerPage:0}}},methods:{getRewardsAndSanctionData(){this.loading=!0,console.log("glabalSubject = ",this.globalSubject),h.getRewardsAndSanctionsCount(this.globalSubject,this.processRewardsAndSanctionData)},processRewardsAndSanctionData(e){const s=this.flattenRewardsAndSanctionData(e);this.rewardsAndSanctionsCount=s,this.loading=!1},flattenRewardsAndSanctionData(e){return e.map(s=>{const n=s.rewardsAndSanctionsCount[0];return{initials:s.initials,code:s.code,commendations:n.Commendations,distinctions:n.Distinctions,copies:n.Copies,minorConcerns:n.MinorConcerns,seriousConcerns:n.SeriousConcerns}})}},computed:{...C({userData:"user/getUserDetails",userClasses:"user/getUserClasses",globalSubject:"user/getGlobalSubject"})},watch:{globalSubject(e){this.getRewardsAndSanctionData()}},mounted(){this.getRewardsAndSanctionData()}},Q=u("span",{class:"text-bold"},"Rewards & Conduct",-1);function P(e,s,n,m,t,l){return t.loading?S("",!0):(d(),f(g,{key:0,rounded:""},{default:o(()=>[a(i,{class:"q-pb-xs"},{default:o(()=>[Q]),_:1}),a(i,{class:"q-pt-xs"},{default:o(()=>[a(b,{flat:"",dense:"","hide-bottom":"",columns:t.columns,rows:e.rewardsAndSanctionsCount,pagination:t.pagination},null,8,["columns","rows","pagination"])]),_:1})]),_:1}))}var T=c(R,[["render",P]]);const V={components:{StaffClassTableCard:x,StaffRewardsCard:T},data(){return{}}},$={class:"q-px-md row items-start q-gutter-md"};function B(e,s,n,m,t,l){const r=p("StaffClassTableCard"),_=p("StaffRewardsCard");return d(),f(w,null,{default:o(()=>[u("div",$,[a(r),a(_)])]),_:1})}var ae=c(V,[["render",B]]);export{ae as default};
