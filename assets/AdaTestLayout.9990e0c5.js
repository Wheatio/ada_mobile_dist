import{_ as b,aC as m,L as f,o as i,I as c,w as s,d as t,Q as h,aD as j,J as d,c as g,M as S,F as w,a as L,$ as _,K as D,av as Q}from"./index.0835d3cd.js";import{Q as v,a as O}from"./QToolbar.45281acf.js";import{Q as k}from"./QSelect.9981794d.js";import{Q as I,a as C,b as V}from"./QLayout.3eeb172f.js";import{Q as y}from"./format.1c072718.js";import{b as A,a as x,Q as B}from"./QItem.b5da8b2b.js";import{Q as T}from"./QPageContainer.585de11d.js";import{d as F}from"./dashboardAPI.5af1c388.js";import"./use-key-composition.c69b71c6.js";import"./use-dark.e535c535.js";import"./focus-manager.8e1b27e8.js";import"./QMenu.9c0ae8ce.js";import"./selection.d17b1b0c.js";import"./focusout.fbc56a61.js";import"./use-tick.a35a1ec4.js";import"./use-timeout.275153e9.js";import"./QDialog.88cddf69.js";import"./use-prevent-scroll.f779b089.js";import"./rtl.b51694b1.js";const H={data(){return{leftDrawerOpen:!1,navItems:[{name:"Bod",label:"Teacher Dashboard",route:"/desktop"},{name:"Hod",label:"HoD Dashboard",route:"/desktop/hod"}],selectedItem:"HoD",subjectList:[{label:"Loading",value:1}],selectedSubject:null,loadingSubjects:!1,filteredSubjectOptions:[]}},methods:{toggleLeftDrawer(){this.leftDrawerOpen=!this.leftDrawerOpen},selectItem(e){this.selectedItem=e,this.$router.push(e.route),this.leftDrawerOpen=!1},getSubjectList(){this.loadingSubjects=!0,F.getSubjectList(this.processSubjectList)},processSubjectList(e){this.subjectList=e,this.loadingSubjects=!1,console.log("subjectList: ",this.subjectList)},selectSubject(e){this.$store.dispatch("user/setGlobalSubject",e.Id)},filterSubjectOptions(e,o){if(e===""){o(()=>{this.filteredSubjectOptions=this.subjectOptions});return}o(()=>{console.log(e);const u=e.toLowerCase();this.filteredSubjectOptions=this.subjectOptions.filter(n=>n.label.toLowerCase().includes(u))})}},components:{},computed:{...m({globalSubject:"user/getGlobalSubject",userDetails:"user/getUserDetails",userClasses:"user/getUserClasses"}),subjectOptions(){return this.subjectList.map(o=>({label:o.name,value:o.Id}))}},watch:{selectedSubject(e){this.$store.dispatch("user/setGlobalSubject",e)}},mounted(){this.getSubjectList()},created(){this.$store.dispatch("user/tryAutoLogin").then(e=>{e===!0?this.$router.replace("/desktop"):this.$router.replace("/")})}},G=L("img",{src:"https://ada.marlboroughcollege.org/statics/icons/plain.svg"},null,-1);function U(e,o,u,n,r,a){const p=f("router-view");return i(),c(I,{view:"hHh lpR fFf"},{default:s(()=>[t(C,{elevated:"",class:"bg-primary text-white"},{default:s(()=>[t(v,null,{default:s(()=>[t(h,{dense:"",flat:"",round:"",icon:"menu",onClick:a.toggleLeftDrawer},null,8,["onClick"]),t(O,null,{default:s(()=>[t(j,null,{default:s(()=>[G]),_:1}),d(" ADA - Academic Database Administration ")]),_:1}),t(k,{modelValue:r.selectedSubject,"onUpdate:modelValue":o[0]||(o[0]=l=>r.selectedSubject=l),filled:"",borderless:"","use-input":"",onFilter:a.filterSubjectOptions,options:r.filteredSubjectOptions,style:{width:"200px"},"label-color":"white","hide-bottom-space":"",label:"Subject","emit-value":"","map-options":""},null,8,["modelValue","onFilter","options"])]),_:1})]),_:1}),t(V,{modelValue:r.leftDrawerOpen,"onUpdate:modelValue":o[1]||(o[1]=l=>r.leftDrawerOpen=l),side:"left",behavior:"desktop",bordered:"",overlay:"","show-if-above":""},{default:s(()=>[t(A,{bordered:"",separator:""},{default:s(()=>[(i(!0),g(w,null,S(r.navItems,l=>_((i(),c(x,{clickable:"",onClick:N=>a.selectItem(l),key:l},{default:s(()=>[t(B,null,{default:s(()=>[t(y,null,{default:s(()=>[d(D(l.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[Q]])),128))]),_:1})]),_:1},8,["modelValue"]),t(T,null,{default:s(()=>[t(p)]),_:1})]),_:1})}var ae=b(H,[["render",U]]);export{ae as default};
