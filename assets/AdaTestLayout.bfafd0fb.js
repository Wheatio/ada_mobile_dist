import{_ as b,aE as m,L as f,o as i,I as c,w as s,d as t,Q as h,aF as j,J as d,c as g,M as S,F as w,a as L,$ as _,K as Q,av as D}from"./index.72a93810.js";import{Q as v,a as O}from"./QToolbar.289c1570.js";import{Q as k}from"./QSelect.d6a65e2e.js";import{Q as I,a as C,b as V}from"./QLayout.2d44213e.js";import{Q as y}from"./selection.329dab79.js";import{b as A,a as x,Q as B}from"./QItem.77cee250.js";import{Q as F}from"./QPageContainer.0050c256.js";import{d as T}from"./dashboardAPI.2fea11d6.js";import"./use-key-composition.1fa31c48.js";import"./use-dark.88e1d066.js";import"./focus-manager.8e1b27e8.js";import"./QMenu.14c8e8f5.js";import"./focusout.e6ce552d.js";import"./use-tick.1c95301c.js";import"./use-timeout.7093c0ee.js";import"./QDialog.f22b9eeb.js";import"./use-prevent-scroll.5e3c3b3a.js";import"./rtl.b51694b1.js";import"./format.a33550d6.js";const H={data(){return{leftDrawerOpen:!1,navItems:[{name:"Bod",label:"Teacher Dashboard",route:"/desktop"},{name:"Hod",label:"HoD Dashboard",route:"/desktop/hod"}],selectedItem:"HoD",subjectList:[{label:"Loading",value:1}],selectedSubject:null,loadingSubjects:!1,filteredSubjectOptions:[]}},methods:{toggleLeftDrawer(){this.leftDrawerOpen=!this.leftDrawerOpen},selectItem(e){this.selectedItem=e,this.$router.push(e.route),this.leftDrawerOpen=!1},getSubjectList(){this.loadingSubjects=!0,T.getSubjectList(this.processSubjectList)},processSubjectList(e){this.subjectList=e,this.loadingSubjects=!1,console.log("subjectList: ",this.subjectList)},selectSubject(e){this.$store.dispatch("user/setGlobalSubject",e.Id)},filterSubjectOptions(e,o){if(e===""){o(()=>{this.filteredSubjectOptions=this.subjectOptions});return}o(()=>{console.log(e);const u=e.toLowerCase();this.filteredSubjectOptions=this.subjectOptions.filter(n=>n.label.toLowerCase().includes(u))})}},components:{},computed:{...m({globalSubject:"user/getGlobalSubject",userDetails:"user/getUserDetails",userClasses:"user/getUserClasses"}),subjectOptions(){return this.subjectList.map(o=>({label:o.name,value:o.Id}))}},watch:{selectedSubject(e){this.$store.dispatch("user/setGlobalSubject",e)}},mounted(){this.getSubjectList()},created(){this.$store.dispatch("user/tryAutoLogin").then(e=>{e===!0?this.$router.replace("/desktop"):this.$router.replace("/")})}},G=L("img",{src:"https://ada.marlboroughcollege.org/statics/icons/plain.svg"},null,-1);function U(e,o,u,n,r,a){const p=f("router-view");return i(),c(I,{view:"hHh lpR fFf"},{default:s(()=>[t(C,{elevated:"",class:"bg-primary text-white"},{default:s(()=>[t(v,null,{default:s(()=>[t(h,{dense:"",flat:"",round:"",icon:"menu",onClick:a.toggleLeftDrawer},null,8,["onClick"]),t(O,null,{default:s(()=>[t(j,null,{default:s(()=>[G]),_:1}),d(" ADA - Academic Database Administration ")]),_:1}),t(k,{modelValue:r.selectedSubject,"onUpdate:modelValue":o[0]||(o[0]=l=>r.selectedSubject=l),filled:"",borderless:"","use-input":"",onFilter:a.filterSubjectOptions,options:r.filteredSubjectOptions,style:{width:"200px"},"label-color":"white","hide-bottom-space":"",label:"Subject","emit-value":"","map-options":""},null,8,["modelValue","onFilter","options"])]),_:1})]),_:1}),t(V,{modelValue:r.leftDrawerOpen,"onUpdate:modelValue":o[1]||(o[1]=l=>r.leftDrawerOpen=l),side:"left",behavior:"desktop",bordered:"",overlay:"","show-if-above":""},{default:s(()=>[t(A,{bordered:"",separator:""},{default:s(()=>[(i(!0),g(w,null,S(r.navItems,l=>_((i(),c(x,{clickable:"",onClick:N=>a.selectItem(l),key:l},{default:s(()=>[t(B,null,{default:s(()=>[t(y,null,{default:s(()=>[d(Q(l.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[D]])),128))]),_:1})]),_:1},8,["modelValue"]),t(F,null,{default:s(()=>[t(p)]),_:1})]),_:1})}var ae=b(H,[["render",U]]);export{ae as default};
