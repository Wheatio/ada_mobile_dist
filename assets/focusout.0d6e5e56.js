import{g as P,am as f,r as w,a4 as F,q,k as D,an as k,ao as G,ap as Q,ac as S,G as $}from"./index.6d7a2b87.js";import{b as m,c as _}from"./focus-manager.8e1b27e8.js";const N={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function j(e,n=()=>{},t=()=>{}){return{transitionProps:P(()=>{const s=`q-transition--${e.transitionShow||n()}`,a=`q-transition--${e.transitionHide||t()}`;return{appear:!0,enterFromClass:`${s}-enter-from`,enterActiveClass:`${s}-enter-active`,enterToClass:`${s}-enter-to`,leaveFromClass:`${a}-leave-from`,leaveActiveClass:`${a}-leave-active`,leaveToClass:`${a}-leave-to`}}),transitionStyle:P(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}const c=[];function H(e){return c.find(n=>n.contentEl!==null&&n.contentEl.contains(e))}function K(e,n){do{if(e.$options.name==="QMenu"){if(e.hide(n),e.$props.separateClosePopup===!0)return f(e)}else if(e.__qPortal===!0){const t=f(e);return t!==void 0&&t.$options.name==="QPopupProxy"?(e.hide(n),t):e}e=f(e)}while(e!=null)}function I(e,n,t){for(;t!==0&&e!==void 0&&e!==null;){if(e.__qPortal===!0){if(t--,e.$options.name==="QMenu"){e=K(e,n);continue}e.hide(n)}e=f(e)}}function L(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function W(e,n,t,s){const a=w(!1),u=w(!1);let l=null;const d={},h=s==="dialog"&&L(e);function C(p){if(p===!0){m(d),u.value=!0;return}u.value=!1,a.value===!1&&(h===!1&&l===null&&(l=G(!1,s)),a.value=!0,c.push(e.proxy),_(d))}function g(p){if(u.value=!1,p!==!0)return;m(d),a.value=!1;const v=c.indexOf(e.proxy);v!==-1&&c.splice(v,1),l!==null&&(Q(l),l=null)}return F(()=>{g(!0)}),e.proxy.__qPortal=!0,q(e.proxy,"contentEl",()=>n.value),{showPortal:C,hidePortal:g,portalIsActive:a,portalIsAccessible:u,renderPortal:()=>h===!0?t():a.value===!0?[D(k,{to:l},t())]:void 0}}const o=[];let r;function O(e){r=e.keyCode===27}function T(){r===!0&&(r=!1)}function y(e){r===!0&&(r=!1,S(e,27)===!0&&o[o.length-1](e))}function b(e){window[e]("keydown",O),window[e]("blur",T),window[e]("keyup",y),r=!1}function B(e){$.is.desktop===!0&&(o.push(e),o.length===1&&b("addEventListener"))}function U(e){const n=o.indexOf(e);n>-1&&(o.splice(n,1),o.length===0&&b("removeEventListener"))}const i=[];function E(e){i[i.length-1](e)}function z(e){$.is.desktop===!0&&(i.push(e),i.length===1&&document.body.addEventListener("focusin",E))}function J(e){const n=i.indexOf(e);n>-1&&(i.splice(n,1),i.length===0&&document.body.removeEventListener("focusin",E))}export{j as a,W as b,U as c,z as d,B as e,K as f,H as g,I as h,c as p,J as r,N as u};
